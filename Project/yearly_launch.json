{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "title": {
    "text": "Objects Launched per Year",
    "subtitle": "Yearly space launches exhibit sharply divergent trajectories across major space-faring states | Source: UNOOSA",
    "anchor": "start"
  },
  "width": 700,
  "height": 320,

  "params": [
    {
      "name": "countryPick",
      "value": "United States",
      "bind": {
        "input": "select",
        "name": "Country: ",
        "options": [
          "United States",
          "Russian Federation",
          "China",
          "United Kingdom",
          "France",
          "Japan",
          "India"
        ]
      }
    },
    {
      "name": "yearMin",
      "value": 1980,
      "bind": { "input": "range", "min": 1980, "max": 2025, "step": 1, "name": "From: " }
    },
    {
      "name": "yearMax",
      "value": 2025,
      "bind": { "input": "range", "min": 1980, "max": 2025, "step": 1, "name": "To: " }
    }
  ],

  "data": {
    "url": "https://raw.githubusercontent.com/hadija-gulubayli/hadija-gulubayli.github.io/refs/heads/main/Data/unoosa_yearly_launches.csv",
    "format": { "type": "csv" }
  },

  "transform": [
    { "filter": "isValid(datum.launch_year) && isValid(datum.launches) && isValid(datum.country)" },
    { "filter": "datum.launch_year >= yearMin && datum.launch_year <= yearMax" },
    { "filter": "datum.country == countryPick" }
  ],

  "layer": [
    {
      "mark": { "type": "line", "strokeWidth": 2, "color": "#0755598b" },
      "encoding": {
        "x": { "field": "launch_year", "type": "quantitative", "title": "Year", "axis": { "format": "d" } },
        "y": { "field": "launches", "type": "quantitative", "title": "Objects launched" },
        "tooltip": [
          { "field": "country", "type": "nominal", "title": "Country" },
          { "field": "launch_year", "type": "quantitative", "title": "Year" },
          { "field": "launches", "type": "quantitative", "title": "Launches" }
        ]
      }
    },

    {
      "transform": [
        { "filter": "countryPick == 'Russian Federation'" },
        { "filter": "1991 >= yearMin && 1991 <= yearMax" },
        { "calculate": "1991", "as": "breakYear" },
        { "calculate": "0", "as": "y0" },
        { "calculate": "max(datum.launches)", "as": "y1" }
      ],
      "mark": { "type": "rule", "strokeDash": [6, 5], "strokeWidth": 1.5, "color": "#111" },
      "encoding": {
        "x": { "field": "breakYear", "type": "quantitative" }
      }
    },

    {
      "transform": [
        { "filter": "countryPick == 'Russian Federation'" },
        { "filter": "1991 >= yearMin && 1991 <= yearMax" },
        { "calculate": "1991", "as": "breakYear" },
        { "calculate": "'USSRâ†’Russia (1991)'" , "as": "label" }
      ],
      "mark": {
        "type": "text",
        "align": "left",
        "baseline": "top",
        "dx": 6,
        "dy": 6,
        "fontSize": 11,
        "color": "#111"
      },
      "encoding": {
        "x": { "field": "breakYear", "type": "quantitative" },
        "y": { "value": 0 },
        "text": { "field": "label" }
      }
    }
  ],

  

  "config": {
  "view": { "stroke": "transparent" },

  "axis": {
    "labelFontSize": 11,
    "titleFontSize": 12,

    "grid": true,
    "gridColor": "#e3e7ee",
    "gridOpacity": 0.4,
    "gridWidth": 1,

    "tickSize": 0,
    "domain": false
  },

  "title": {
    "fontSize": 16,
    "subtitleFontSize": 12
  }
}

}